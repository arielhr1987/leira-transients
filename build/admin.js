(()=>{"use strict";var t,e;window.jQuery,window.wp=window.wp||{},inlineEditL10n={error:"Error while saving the changes.",saved:"Changes saved.",confirmDelete:"Are you sure you want to delete this transient?"},t=jQuery,e=window.wp,window.inlineEditTransient={init(){const e=this,i=t("#inline-edit"),n=t("#the-list");e.type=n.attr("data-wp-lists").substring(5),e.what="#"+e.type+"-",n.on("click",".editinline",function(){t(this).attr("aria-expanded","true"),inlineEditTransient.edit(this)}),i.keyup(function(t){if(27===t.which)return inlineEditTransient.revert()}),t(".cancel",i).click(function(){return inlineEditTransient.revert()}),t(".save",i).click(function(){return inlineEditTransient.save(this)}),t("input, select",i).keydown(function(t){if(13===t.which)return inlineEditTransient.save(this)}),t('#posts-filter input[type="submit"]').mousedown(function(){e.revert()}),inlineEditTransient.updateDates(),n.on("click",".row-actions .delete a.submitdelete",function(){return confirm(inlineEditL10n.confirmDelete)}),t("body").on("click","a.leira-transients-admin-rating-link",function(){t.post(ajaxurl,{action:"leira-transients-footer-rated",_wpnonce:t(this).data("nonce")},function(){}),t(this).parent().text(t(this).data("rated"))})},toggle(e){const i=this;"none"===t(i.what+i.getId(e)).css("display")?i.revert():i.edit(e)},edit(e){let i,n,a=this;return a.revert(),"object"==typeof e&&(e=a.getId(e)),i=t("#inline-edit").clone(!0),n=t("#inline_"+e),t("td",i).attr("colspan",t("th:visible, td:visible",".wp-list-table.widefat:first thead").length),t(a.what+e).hide().after(i).after('<tr class="hidden"></tr>'),t("> div",n).each(function(e,n){const a=(n=t(n)).attr("class");if(n=n.text(),"expiration"===a){let e="";if(""!==n){const t=new Date(1e3*n),i=t=>String(t).padStart(2,"0");e=t.getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate())+"T"+i(t.getHours())+":"+i(t.getMinutes()),e+=":"+i(t.getSeconds())}t(":input[name=expiration]",i).val(e)}else if("name"===a){let e=n;n.toString().startsWith("_site_transient_")&&(e=n.toString().substring(16)),n.toString().startsWith("_transient_")&&(e=n.substring(11)),t(':input[name="name"]',i).val(e),t(':input[name="original-name"]',i).val(n)}else t(":input[name="+a+"]",i).val(n)}),t(i).attr("id","edit-"+e).addClass("inline-editor").show(),t(".ptitle",i).eq(0).focus(),!1},save(i){let n,a;"object"==typeof i&&(i=this.getId(i)),t("table.widefat .spinner").addClass("is-active");let r=t("#edit-"+i+' input[name="expiration"]').val();return r=new Date(r),r=r.toISOString(),n={expiration:r},a=t("#edit-"+i).find(":input").not('input[name="expiration"]').serialize(),n=a+"&"+t.param(n),t.post(ajaxurl,n).done(function(n){let a,r,s=t("#edit-"+i+" .inline-edit-save .notice-error"),d=s.find(".error");t("table.widefat .spinner").removeClass("is-active"),n?-1!==n.indexOf("<tr")?(t(inlineEditTransient.what+i).siblings("tr.hidden").addBack().remove(),r=t(n).attr("id"),t("#edit-"+i).before(n).remove(),a=t(r?"#"+r:inlineEditTransient.what+i),a.hide().fadeIn(400,function(){a.find(".editinline").attr("aria-expanded","false").focus(),e.a11y.speak(inlineEditL10n.saved)}),inlineEditTransient.updateDates()):(s.removeClass("hidden"),d.html(n),e.a11y.speak(d.text())):(s.removeClass("hidden"),d.html(inlineEditL10n.error),e.a11y.speak(inlineEditL10n.error))}).fail(function(){t("table.widefat .spinner").removeClass("is-active");const n=t("#edit-"+i+" .inline-edit-save .notice-error");n.removeClass("hidden"),n.find(".error").html(inlineEditL10n.error),e.a11y.speak(inlineEditL10n.error)}),!1},revert(){let e=t("table.widefat tr.inline-editor").attr("id");e&&(t("table.widefat .spinner").removeClass("is-active"),t("#"+e).siblings("tr.hidden").addBack().remove(),e=e.substring(e.lastIndexOf("-")+1),t(this.what+e).show().find(".editinline").attr("aria-expanded","false").focus())},updateDates(){t("#the-list time").each(function(e,i){const n=(i=t(i)).attr("datetime"),a=i.data("format"),r=new Date(n);i.text(inlineEditTransient.dateFormat(a,r))})},dateFormat(t,e){e instanceof Date||(e=new Date(e));const i={Y:e.getFullYear(),y:e.getFullYear().toString().slice(-2),m:String(e.getMonth()+1).padStart(2,"0"),n:e.getMonth()+1,d:String(e.getDate()).padStart(2,"0"),j:e.getDate(),H:String(e.getHours()).padStart(2,"0"),h:String((e.getHours()+11)%12+1).padStart(2,"0"),g:(e.getHours()+11)%12+1,i:String(e.getMinutes()).padStart(2,"0"),s:String(e.getSeconds()).padStart(2,"0"),a:e.getHours()<12?"am":"pm",A:e.getHours()<12?"AM":"PM",D:e.toLocaleString("en-US",{weekday:"short"}),l:e.toLocaleString("en-US",{weekday:"long"}),M:e.toLocaleString("en-US",{month:"short"}),F:e.toLocaleString("en-US",{month:"long"}),c:e.toISOString(),w:e.getDay()};return t.replace(/\\?([a-zA-Z])/g,(t,e)=>void 0!==i[e]?i[e]:e)},getId(e){const i="TR"===e.tagName?e.id:t(e).parents("tr").attr("id");return i.substring(i.indexOf("-")+1)}},t(document).ready(function(){inlineEditTransient.init()})})();